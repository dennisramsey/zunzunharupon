{"version":3,"file":"index.es.js","sources":["../src/createJuicePlugin.ts"],"sourcesContent":["import {\n  createPluginFactory,\n  KEY_DESERIALIZE_HTML,\n} from '@udecode/plate-common';\nimport juice from 'juice';\n\nexport const KEY_JUICE = 'juice';\n\nexport const createJuicePlugin = createPluginFactory({\n  key: KEY_JUICE,\n  inject: {\n    pluginsByKey: {\n      [KEY_DESERIALIZE_HTML]: {\n        editor: {\n          insertData: {\n            transformData: (data) => {\n              // juice ignores the first class when there is <!-- just after <style>, so we remove it\n              let newData = data.replaceAll(/<style>(\\s*)<!--/g, '<style>');\n              newData = juice(newData);\n              return newData;\n            },\n          },\n        },\n      },\n    },\n  },\n});\n"],"names":["KEY_JUICE","createJuicePlugin","createPluginFactory","key","inject","pluginsByKey","KEY_DESERIALIZE_HTML","editor","insertData","transformData","data","newData","replaceAll","juice"],"mappings":";;;AAMO,MAAMA,SAAS,GAAG,QAAO;AAEnBC,MAAAA,iBAAiB,GAAGC,mBAAmB,CAAC;AACnDC,EAAAA,GAAG,EAAEH,SAAS;AACdI,EAAAA,MAAM,EAAE;AACNC,IAAAA,YAAY,EAAE;AACZ,MAAA,CAACC,oBAAoB,GAAG;AACtBC,QAAAA,MAAM,EAAE;AACNC,UAAAA,UAAU,EAAE;YACVC,aAAa,EAAGC,IAAI,IAAK;AACvB;cACA,IAAIC,OAAO,GAAGD,IAAI,CAACE,UAAU,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAA;AAC7DD,cAAAA,OAAO,GAAGE,KAAK,CAACF,OAAO,CAAC,CAAA;AACxB,cAAA,OAAOA,OAAO,CAAA;AAChB,aAAA;AACF,WAAA;AACF,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAC;;;;"}
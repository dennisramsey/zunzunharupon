{"version":3,"file":"index.js","sources":["../src/utils/isTouchEvent.ts","../src/utils/resizeLengthToRelative.ts","../src/utils/resizeLengthToStatic.ts","../src/utils/resizeLengthClamp.ts","../src/components/ResizeHandle.tsx","../src/components/useResizableStore.ts","../src/components/Resizable.tsx"],"sourcesContent":["export const isTouchEvent = (\n  event: MouseEvent | TouchEvent\n): event is TouchEvent => 'touches' in event;\n","import { ResizeLength, ResizeLengthRelative } from '../types';\n\nexport const resizeLengthToRelative = (\n  length: ResizeLength,\n  parentLength: number\n): ResizeLengthRelative => {\n  if (typeof length === 'number') {\n    return `${(length / parentLength) * 100}%`;\n  }\n\n  return length;\n};\n","import { ResizeLength, ResizeLengthStatic } from '../types';\n\nexport const resizeLengthToStatic = (\n  length: ResizeLength,\n  parentLength: number\n): ResizeLengthStatic => {\n  if (typeof length === 'string') {\n    return (parentLength * Number.parseFloat(length)) / 100;\n  }\n\n  return length;\n};\n","import { ResizeLength, ResizeLengthStatic } from '../types';\nimport { resizeLengthToRelative } from './resizeLengthToRelative';\nimport { resizeLengthToStatic } from './resizeLengthToStatic';\n\nexport interface ResizeLengthClampOptions<T = ResizeLength> {\n  min?: T;\n  max?: T;\n}\n\nexport const resizeLengthClampStatic = (\n  length: ResizeLengthStatic,\n  { min, max }: ResizeLengthClampOptions<ResizeLengthStatic>\n): ResizeLengthStatic => {\n  if (min !== undefined) {\n    length = Math.max(length, min);\n  }\n\n  if (max !== undefined) {\n    length = Math.min(length, max);\n  }\n\n  return length;\n};\n\nexport const resizeLengthClamp = <T extends ResizeLength>(\n  length: T,\n  parentLength: number,\n  { min, max }: ResizeLengthClampOptions<ResizeLength>\n): T => {\n  const staticLength = resizeLengthToStatic(length, parentLength);\n\n  const clampedStaticLength = resizeLengthClampStatic(staticLength, {\n    min:\n      min === undefined ? undefined : resizeLengthToStatic(min, parentLength),\n    max:\n      max === undefined ? undefined : resizeLengthToStatic(max, parentLength),\n  });\n\n  switch (typeof length) {\n    case 'string': {\n      return resizeLengthToRelative(clampedStaticLength, parentLength) as T;\n    }\n\n    case 'number': {\n      return clampedStaticLength as T;\n    }\n\n    default: {\n      throw new Error('Invalid length type');\n    }\n  }\n};\n","import React, {\n  MouseEventHandler,\n  TouchEventHandler,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  atom,\n  createPrimitiveComponent,\n  JotaiProvider,\n  useAtom,\n} from '@udecode/plate-common';\n\nimport { ResizeDirection, ResizeEvent } from '../types';\nimport { isTouchEvent } from '../utils';\n\nexport const resizeHandleAtoms = {\n  onResize: atom<{ fn: any } | null>(null),\n};\n\nexport const ResizeHandleEffects = ({\n  onResize,\n}: {\n  onResize?: ResizeHandleOptions['onResize'];\n}) => {\n  const [, setHandleResize] = useAtom(resizeHandleAtoms.onResize);\n\n  useEffect(() => {\n    setHandleResize({ fn: onResize });\n  }, [onResize, setHandleResize]);\n\n  return null;\n};\n\nexport const ResizeHandleProvider = ({\n  children,\n  onResize,\n}: {\n  children: React.ReactNode;\n  onResize?: ResizeHandleOptions['onResize'];\n}) => {\n  return (\n    <JotaiProvider\n      initialValues={[[resizeHandleAtoms.onResize, { fn: onResize }]]}\n    >\n      <ResizeHandleEffects onResize={onResize} />\n      {children}\n    </JotaiProvider>\n  );\n};\n\nexport type ResizeHandleOptions = {\n  direction?: ResizeDirection;\n  onResize?: (event: ResizeEvent) => void;\n  onMouseDown?: MouseEventHandler;\n  onTouchStart?: TouchEventHandler;\n  onHover?: () => void;\n  onHoverEnd?: () => void;\n};\n\nexport const useResizeHandleState = ({\n  direction = 'left',\n  onResize,\n  onMouseDown,\n  onTouchStart,\n  onHover,\n  onHoverEnd,\n}: ResizeHandleOptions) => {\n  const [_onResize] = useAtom(resizeHandleAtoms.onResize);\n  if (!onResize) onResize = _onResize?.fn;\n\n  const [isResizing, setIsResizing] = useState(false);\n  const [initialPosition, setInitialPosition] = useState(0);\n  const [initialSize, setInitialSize] = useState(0);\n\n  const isHorizontal = direction === 'left' || direction === 'right';\n\n  useEffect(() => {\n    if (!isResizing) return;\n\n    const sendResizeEvent = (\n      event: MouseEvent | TouchEvent,\n      finished: boolean\n    ) => {\n      const { clientX, clientY } = isTouchEvent(event)\n        ? event.touches[0] || event.changedTouches[0]\n        : event;\n\n      const currentPosition = isHorizontal ? clientX : clientY;\n      const delta = currentPosition - initialPosition;\n      onResize?.({ initialSize, delta, finished, direction });\n    };\n\n    const handleMouseMove = (event: MouseEvent | TouchEvent) =>\n      sendResizeEvent(event, false);\n\n    const handleMouseUp = (event: MouseEvent | TouchEvent) => {\n      setIsResizing(false);\n      onHoverEnd?.();\n      sendResizeEvent(event, true);\n    };\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    window.addEventListener('touchmove', handleMouseMove);\n    window.addEventListener('touchend', handleMouseUp);\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n    };\n  }, [\n    isResizing,\n    initialPosition,\n    initialSize,\n    onResize,\n    isHorizontal,\n    onHoverEnd,\n    direction,\n  ]);\n\n  return {\n    isResizing,\n    setIsResizing,\n    initialPosition,\n    setInitialPosition,\n    initialSize,\n    setInitialSize,\n    isHorizontal,\n    direction,\n    onResize,\n    onMouseDown,\n    onTouchStart,\n    onHover,\n    onHoverEnd,\n  };\n};\n\nexport const useResizeHandle = ({\n  setInitialPosition,\n  setInitialSize,\n  setIsResizing,\n  onMouseDown,\n  onTouchStart,\n  isHorizontal,\n  isResizing,\n  onHover,\n  onHoverEnd,\n}: ReturnType<typeof useResizeHandleState>) => {\n  const handleMouseDown: MouseEventHandler = (event) => {\n    const { clientX, clientY } = event;\n    setInitialPosition(isHorizontal ? clientX : clientY);\n\n    const element = (event.target as HTMLElement).parentElement!;\n    setInitialSize(isHorizontal ? element.offsetWidth : element.offsetHeight);\n\n    setIsResizing(true);\n\n    onMouseDown?.(event);\n  };\n\n  const handleTouchStart: TouchEventHandler = (event) => {\n    const { touches } = event;\n    const touch = touches[0];\n    const { clientX, clientY } = touch;\n    setInitialPosition(isHorizontal ? clientX : clientY);\n\n    const element = (event.target as HTMLElement).parentElement!;\n    setInitialSize(isHorizontal ? element.offsetWidth : element.offsetHeight);\n    setIsResizing(true);\n    onTouchStart?.(event);\n  };\n\n  const handleMouseOver = () => {\n    onHover?.();\n  };\n\n  const handleMouseOut = () => {\n    if (!isResizing) {\n      onHoverEnd?.();\n    }\n  };\n\n  return {\n    props: {\n      onMouseDown: handleMouseDown,\n      onTouchStart: handleTouchStart,\n      onMouseOver: handleMouseOver,\n      onMouseOut: handleMouseOut,\n      onTouchMove: handleMouseOver,\n      onTouchEnd: handleMouseOut,\n    },\n  };\n};\n\nexport const ResizeHandle = createPrimitiveComponent<\n  'div',\n  Omit<React.HTMLAttributes<HTMLDivElement>, 'onResize'>\n>('div')({\n  propsHook: useResizeHandle,\n  stateHook: useResizeHandleState,\n});\n\nexport type ResizeHandleProps = React.ComponentPropsWithRef<\n  typeof ResizeHandle\n>;\n","import { CSSProperties } from 'react';\nimport { createAtomStore, SCOPE_ELEMENT } from '@udecode/plate-common';\n\nexport const { resizableStore, useResizableStore } = createAtomStore(\n  {\n    width: 0 as CSSProperties['width'],\n  },\n  { name: 'resizable', scope: SCOPE_ELEMENT }\n);\n","import React, {\n  CSSProperties,\n  HTMLAttributes,\n  useCallback,\n  useEffect,\n  useRef,\n} from 'react';\nimport {\n  findNodePath,\n  select,\n  setNodes,\n  useElement,\n  usePlateEditorRef,\n} from '@udecode/plate-common';\n\nimport { ResizeEvent, ResizeLength } from '../types';\nimport { resizeLengthClamp } from '../utils';\nimport { ResizeHandleProvider } from './ResizeHandle';\nimport { TResizableElement } from './TResizableElement';\nimport { useResizableStore } from './useResizableStore';\n\nexport interface ResizableOptions {\n  /**\n   * Node alignment.\n   */\n  align?: 'left' | 'center' | 'right';\n\n  readOnly?: boolean;\n\n  minWidth?: ResizeLength;\n  maxWidth?: ResizeLength;\n}\n\nexport const useResizableState = ({\n  align = 'center',\n  minWidth = 92,\n  maxWidth = '100%',\n}: ResizableOptions = {}) => {\n  const element = useElement<TResizableElement>();\n  const editor = usePlateEditorRef();\n\n  const nodeWidth = element?.width ?? '100%';\n\n  const [width, setWidth] = useResizableStore().use.width();\n\n  const setNodeWidth = useCallback(\n    (w: number) => {\n      const path = findNodePath(editor, element!);\n      if (!path) return;\n\n      if (w === nodeWidth) {\n        // Focus the node if not resized\n        select(editor, path);\n      } else {\n        setNodes<TResizableElement>(editor, { width: w }, { at: path });\n      }\n    },\n    [editor, element, nodeWidth]\n  );\n\n  useEffect(() => {\n    setWidth(nodeWidth);\n  }, [nodeWidth, setWidth]);\n\n  return {\n    align,\n    minWidth,\n    maxWidth,\n    setNodeWidth,\n    setWidth,\n    width,\n  };\n};\n\nexport const useResizable = ({\n  align,\n  minWidth,\n  maxWidth,\n  setNodeWidth,\n  setWidth,\n  width,\n}: ReturnType<typeof useResizableState>) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  return {\n    wrapperRef,\n    wrapperProps: {\n      style: {\n        position: 'relative',\n      } as CSSProperties,\n    },\n    props: {\n      style: {\n        width,\n        minWidth,\n        maxWidth,\n        position: 'relative',\n      } as CSSProperties,\n    },\n    context: {\n      onResize: useCallback(\n        ({ initialSize, delta, finished, direction }: ResizeEvent) => {\n          const wrapperStaticWidth = wrapperRef.current!.offsetWidth;\n          const deltaFactor =\n            (align === 'center' ? 2 : 1) * (direction === 'left' ? -1 : 1);\n\n          const newWidth = resizeLengthClamp(\n            initialSize + delta * deltaFactor,\n            wrapperStaticWidth,\n            {\n              min: minWidth,\n              max: maxWidth,\n            }\n          );\n\n          if (finished) {\n            setNodeWidth(newWidth);\n          } else {\n            setWidth(newWidth);\n          }\n        },\n        [align, maxWidth, minWidth, setNodeWidth, setWidth]\n      ),\n    },\n  };\n};\n\nconst Resizable = React.forwardRef<\n  HTMLDivElement,\n  HTMLAttributes<HTMLDivElement> & {\n    options: ResizableOptions;\n  }\n>(({ children, options, ...rest }, ref) => {\n  const state = useResizableState(options);\n  const { wrapperRef, wrapperProps, props, context } = useResizable(state);\n\n  return (\n    <div ref={wrapperRef} {...wrapperProps}>\n      <div ref={ref} {...props} {...rest}>\n        <ResizeHandleProvider onResize={context.onResize}>\n          {children}\n        </ResizeHandleProvider>\n      </div>\n    </div>\n  );\n});\nResizable.displayName = 'Resizable';\n\nexport { Resizable };\n"],"names":["isTouchEvent","event","resizeLengthToRelative","length","parentLength","resizeLengthToStatic","Number","parseFloat","resizeLengthClampStatic","min","max","undefined","Math","resizeLengthClamp","staticLength","clampedStaticLength","Error","resizeHandleAtoms","onResize","atom","ResizeHandleEffects","setHandleResize","useAtom","useEffect","fn","ResizeHandleProvider","children","React","createElement","JotaiProvider","initialValues","useResizeHandleState","direction","onMouseDown","onTouchStart","onHover","onHoverEnd","_onResize","isResizing","setIsResizing","useState","initialPosition","setInitialPosition","initialSize","setInitialSize","isHorizontal","sendResizeEvent","finished","_onResize2","clientX","clientY","touches","changedTouches","currentPosition","delta","handleMouseMove","handleMouseUp","window","addEventListener","removeEventListener","useResizeHandle","handleMouseDown","element","target","parentElement","offsetWidth","offsetHeight","handleTouchStart","touch","handleMouseOver","handleMouseOut","props","onMouseOver","onMouseOut","onTouchMove","onTouchEnd","ResizeHandle","createPrimitiveComponent","propsHook","stateHook","resizableStore","useResizableStore","createAtomStore","width","name","scope","SCOPE_ELEMENT","useResizableState","align","minWidth","maxWidth","_element$width","useElement","editor","usePlateEditorRef","nodeWidth","setWidth","use","setNodeWidth","useCallback","w","path","findNodePath","select","setNodes","at","useResizable","wrapperRef","useRef","wrapperProps","style","position","context","wrapperStaticWidth","current","deltaFactor","newWidth","Resizable","forwardRef","options","rest","ref","state","_extends","displayName"],"mappings":"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"}